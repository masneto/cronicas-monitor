name: "Disparar workflow no Child"

on:
  workflow_call:
    inputs:
      input1:
        description: "Primeiro valor"
        required: true
        default: "abc"
        type: string
      input2:
        description: "Segundo valor"
        required: true
        default: "123"
        type: string
      input3:
        description: "VariÃ¡veis extras em JSON"
        required: true
        default: '{"var1":"teste1","var2":"teste2"}'
        type: string

jobs:
  call-child:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger no Child Repo
        uses: masneto/cronicas-actions/.github/actions/wf-dispatcher@feature/add-wf-dispatcher
        with:
          source-file: "python/python-workflow.yml"
          workflow-file: "teste.yml"
          branch: ${{ github.ref_name }}
          inputs-json: >-
            {
              "input1": "${{ inputs.input1 }}",
              "input2": "${{ inputs.input2 }}",
              "input3": ${{ inputs.input3 }}
            }
          token: ${{ secrets.PAT_GITHUB_TOKEN }}